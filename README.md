# AvitoTest
Тестовое задание на Golang для Стажировки в Avito.
В рамках задания было выполнено основное задание, а также два дополнительных.
# База данных
В рамках задания была выбрана СУБД PostgreSQL.
Схема:
![Image alt](https://github.com/Mkkysh/AvitoTest/blob/main/SchemaDB.png)
# Запуск
## Docker
Перед запуском нужно убедиться, что в файле .env переменная окружения DB_HOST=db.
Чтобы запустить приложение с помощью Docker, необходимо из директории проекта выполнить команду
```
docker-compose up --build app
```
Также необходимо создать БД в контейнере postgres и выполнить sql сприпт для создания таблиц (SQLSchema.SQL в корне проекта).
## Консоль
Перед запуском нужно убедиться, что в файле .env переменные по БД соответствовали вашей СУБД.
Чтобы запустить приложение без Docker, необходимо из корня проекта выполнить следующую команду
```
go run .\cmd\main.go
```
Также необходимо создать БД в postgres и выполнить sql сприпт для создания таблиц (SQLSchema.SQL в корне проекта).
# Запросы
## Segment
```
POST http://localhost:8080/api/segments?partAuto=50
{
  "name": "Test"
}
```
Запрос на создание сегмента, также опционально можно выбрать процент пользователей, который попадет в сегмент автоматически.
